<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:EasySave.GUI.ViewModels"
        xmlns:helpers="clr-namespace:EasySave.GUI.Helpers"
        x:Class="EasySave.GUI.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="EasySave" Width="800" Height="600">
    
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="File">
                <MenuItem Header="Configuration" Command="{Binding OpenConfigurationCommand}" />
                <MenuItem Header="Exit" Command="{Binding ExitCommand}" />
            </MenuItem>
        </Menu>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="10">
                <!-- Mise à jour des commandes pour ouvrir les fenêtres Add et Modify -->
                <Button Content="Add" Command="{Binding OpenAddJobWindowCommand}" Margin="5"/>
                <Button Content="Modify" Command="{Binding OpenModifyJobWindowCommand}" Margin="5"/>
                <Button Content="List All" Command="{Binding OpenListAllJobWindowCommand}" Margin="5"/>
                <Button Content="Delete" Command="{Binding DeleteJobCommand}" Margin="5"/>
                <Button Content="Execute" Command="{Binding ExecuteAllJobsCommand}" Margin="5"/>
            </StackPanel>

            <DataGrid Grid.Row="1" ItemsSource="{Binding BackupJobs}" AutoGenerateColumns="False" Margin="10"
                      SelectionMode="Single" Focusable="True"
                      SelectedItem="{Binding SelectedJob, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Name" Binding="{Binding Name}" />
                    <DataGridTextColumn Header="Source" Binding="{Binding SourceDirectory}" />
                    <DataGridTextColumn Header="Target" Binding="{Binding TargetDirectory}" />
                    <DataGridTextColumn Header="Type" Binding="{Binding BackupType}" />
                </DataGrid.Columns>
            </DataGrid>

            <Border Grid.Row="2" BorderBrush="Gray" BorderThickness="1" Padding="10" Margin="10">
                <StackPanel>
                    <TextBlock Text="Real-Time Status" FontWeight="Bold" Margin="0,0,0,5"/>
                    <TextBlock Text="{Binding RealTimeStatus}" />
                </StackPanel>
            </Border>
        </Grid>
    </DockPanel>
</Window>
